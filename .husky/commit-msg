#!/usr/bin/env sh

# ì»¤ë°‹ ë©”ì‹œì§€ ì½ê¸°
commit_msg=$(cat "$1")

# Conventional Commits íŒ¨í„´
# í˜•ì‹: type(scope): subject
# ì˜ˆì‹œ: feat: ë¡œê·¸ì¸ ê¸°ëŠ¥ êµ¬í˜„
pattern="^(feat|fix|build|docs|style|refactor|test|ci|perf|chore)(\(.+\))?: .{1,}"

if ! echo "$commit_msg" | grep -qE "$pattern"; then
  echo ""
  echo "âŒ ì»¤ë°‹ ë©”ì‹œì§€ê°€ ì»¨ë²¤ì…˜ì— ë§ì§€ ì•ŠìŠµë‹ˆë‹¤!"
  echo ""
  echo "âœ… ì˜¬ë°”ë¥¸ í˜•ì‹: <type>(<scope>): <subject>"
  echo ""
  echo "ğŸ§‘ğŸ»â€ğŸ’» ì‚¬ìš© ê°€ëŠ¥í•œ íƒ€ì…"
  echo "  - feat:     ìƒˆë¡œìš´ ê¸°ëŠ¥"
  echo "  - fix:      ë²„ê·¸ ìˆ˜ì •"
  echo "  - build:    ë¹Œë“œ ê´€ë ¨ íŒŒì¼ ìˆ˜ì •"
  echo "  - docs:     ë¬¸ì„œ ìˆ˜ì •"
  echo "  - style:    ì½”ë“œ ìŠ¤íƒ€ì¼ í˜¹ì€ í¬ë§· ê´€ë ¨"
  echo "  - refactor: ì½”ë“œ ë¦¬íŒ©í† ë§"
  echo "  - test:     í…ŒìŠ¤íŠ¸ ì¶”ê°€/ìˆ˜ì •"
  echo "  - ci:       CI ì„¤ì • ë³€ê²½"
  echo "  - perf:     ì„±ëŠ¥ ê°œì„ "
  echo "  - chore:    ê·¸ ì™¸ ì‘ì—…"

  echo ""
  echo "ğŸ‘€ ì˜ˆì‹œ"
  echo "  feat(auth): add login feature"
  echo "  fix(api): resolve CORS issue"
  echo "  docs: update README"
  echo "  refactor(user): simplify validation logic"
  echo ""
  echo "í˜„ì¬ ë©”ì‹œì§€: $commit_msg"
  exit 1
fi