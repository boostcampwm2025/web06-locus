#!/usr/bin/env sh

# í˜„ì¬ ë¸Œëœì¹˜ í™•ì¸
current_branch=$(git symbolic-ref --short HEAD)

# main ë¸Œëœì¹˜ì—ì„œ ì§ì ‘ pushí•˜ëŠ” ê²½ìš°ë¥¼ ì°¨ë‹¨
if [ "$current_branch" = "main" ]; then
  echo "ğŸš« ì˜¤ë¥˜: main ë¸Œëœì¹˜ì—ì„œ ì§ì ‘ í‘¸ì‹œëŠ” í—ˆìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤!"
  echo "ğŸ’¡ ìƒˆë¡œìš´ ê¸°ëŠ¥ ë¸Œëœì¹˜ë¥¼ ë§Œë“¤ì–´ì„œ ì‘ì—…í•´ì£¼ì„¸ìš”."
  exit 1
fi

# main ë¸Œëœì¹˜ë¡œ push ì‹œë„ë¥¼ ì°¨ë‹¨
while read local_ref local_sha remote_ref remote_sha
do
  # remote_refê°€ refs/heads/mainì´ë©´ ì°¨ë‹¨
  if [ "$remote_ref" = "refs/heads/main" ]; then
    echo "ğŸš« ì˜¤ë¥˜: main ë¸Œëœì¹˜ë¡œ ì§ì ‘ í‘¸ì‹œëŠ” í—ˆìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤!"
    echo "ğŸ’¡ Pull Requestë¥¼ í†µí•´ main ë¸Œëœì¹˜ì— ë¨¸ì§€í•´ì£¼ì„¸ìš”."
    exit 1
  fi
done

exit 0