services:
  locus-api:
    image: locus-dev-registry.kr.ncr.ntruss.com/locus-api:latest
    container_name: locus-api
    ports:
      - '3000:3000'
    env_file:
      - .env.prod
    depends_on:
      - locus-redis
    networks:
      - locus-network
    restart: always

  locus-redis:
    image: redis:7-alpine
    container_name: locus-redis
    ports:
      - '6379:6379'
    networks:
      - locus-network
    restart: always

  locus-nginx:
    image: locus-dev-registry.kr.ncr.ntruss.com/locus-nginx:latest
    container_name: locus-nginx
    ports:
      - '80:80'
      - '443:443'
    depends_on:
      - locus-api
    networks:
      - locus-network
    restart: always

networks:
  locus-network:
    driver: bridge
